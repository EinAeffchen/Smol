# Example omoide.env with every environment setting at its default.

# Serve in read-only mode (no writes).
OMOIDE_GENERAL__READ_ONLY=false
# Enable face/person features.
OMOIDE_GENERAL__ENABLE_PEOPLE=true
# Enable meme mode labels.
OMOIDE_GENERAL__MEME_MODE=false
# Max nodes returned for people graph.
OMOIDE_GENERAL__PERSON_RELATIONSHIP_MAX_NODES=100
# Max thumbnails per folder.
OMOIDE_GENERAL__THUMB_DIR_FOLDER_SIZE=1000

# Enable automatic background scans.
OMOIDE_SCAN__AUTO_SCAN=false
# Minutes between auto scans.
OMOIDE_SCAN__SCAN_INTERVAL_MINUTES=15
# Clean DB of missing files during auto scan.
OMOIDE_SCAN__AUTO_CLEAN_ON_SCAN=false
# Remove missing records without manual review.
OMOIDE_SCAN__AUTO_CLEANUP_WITHOUT_REVIEW=false
# Grace period (hours) before auto cleanup deletes missing items.
OMOIDE_SCAN__AUTO_CLEANUP_GRACE_HOURS=72
# Re-cluster faces automatically on scan.
OMOIDE_SCAN__AUTO_CLUSTER_ON_SCAN=false
# Respect EXIF rotation automatically.
OMOIDE_SCAN__AUTO_ROTATE=true
# Video suffixes to ingest (comma-separated list).
OMOIDE_SCAN__VIDEO_SUFFIXES=.mp4,.mov,.wmv,.avi,.flv,.mkv,.webm,.gp3,.gif,.ts,.mpeg
# Image suffixes to ingest (comma-separated list).
OMOIDE_SCAN__IMAGE_SUFFIXES=.jpg,.jpeg,.png,.tiff,.bmp

# OpenCLIP model (options: xlm-roberta-large-ViT-H-14, xlm-roberta-base-ViT-B-32, ViT-L-14, ViT-B-32, convnext_base_w).
OMOIDE_AI__CLIP_MODEL=xlm-roberta-base-ViT-B-32
# Minimum cosine distance for semantic search (higher = stricter).
OMOIDE_AI__MIN_SEARCH_DIST=0.68
# Similarity distance for similar media suggestions. Higher = stronger similarity
OMOIDE_AI__MIN_SIMILARITY_DIST=1.2

# Run automatic tagging.
OMOIDE_TAGGING__AUTO_TAGGING=true
# Include built-in default tags.
OMOIDE_TAGGING__USE_DEFAULT_TAGS=true
# Custom tags (comma-separated list).
OMOIDE_TAGGING__CUSTOM_TAGS=,

# Face clustering preset (options: strict, normal, loose, custom).
OMOIDE_FACE_RECOGNITION__PRESET=loose
# Minimum confidence to extract a face.
OMOIDE_FACE_RECOGNITION__FACE_RECOGNITION_MIN_CONFIDENCE=0.5
# Minimum percent match to attach a face to a person.
OMOIDE_FACE_RECOGNITION__FACE_MATCH_MIN_PERCENT=75
# Cosine threshold for matching faces to existing persons.
OMOIDE_FACE_RECOGNITION__EXISTING_PERSON_COSINE_THRESHOLD=0.8
# Required margin between best and second-best match.
OMOIDE_FACE_RECOGNITION__EXISTING_PERSON_MIN_COSINE_MARGIN=0.05
# Minimum face pixel area to be considered.
OMOIDE_FACE_RECOGNITION__FACE_RECOGNITION_MIN_FACE_PIXELS=1600
# Faces needed to auto-create a person.
OMOIDE_FACE_RECOGNITION__PERSON_MIN_FACE_COUNT=2
# Distinct media items required per person.
OMOIDE_FACE_RECOGNITION__PERSON_MIN_MEDIA_COUNT=2
# Maximum L2 radius allowed inside a face cluster.
OMOIDE_FACE_RECOGNITION__PERSON_CLUSTER_MAX_L2_RADIUS=1
# Percent similarity to merge near-duplicate persons.
OMOIDE_FACE_RECOGNITION__PERSON_MERGE_PERCENT_SIMILARITY=75
# Search K used when merging persons.
OMOIDE_FACE_RECOGNITION__PERSON_MERGE_SEARCH_K=20
# Faces processed per clustering batch.
OMOIDE_FACE_RECOGNITION__CLUSTER_BATCH_SIZE=15000
# Minimum cluster size for HDBSCAN.
OMOIDE_FACE_RECOGNITION__HDBSCAN_MIN_CLUSTER_SIZE=6
# Minimum samples for HDBSCAN.
OMOIDE_FACE_RECOGNITION__HDBSCAN_MIN_SAMPLES=10
# HDBSCAN cluster selection method (options: leaf, eom).
OMOIDE_FACE_RECOGNITION__HDBSCAN_CLUSTER_SELECTION_METHOD=eom
# HDBSCAN cluster selection epsilon.
OMOIDE_FACE_RECOGNITION__HDBSCAN_CLUSTER_SELECTION_EPSILON=0.1

# How to handle duplicates (options: keep, remove, blacklist, delete).
OMOIDE_DUPLICATES__DUPLICATE_AUTO_HANDLING=keep
# Which file to keep when auto-handling (options: biggest, smallest, highest_res, lowest_res, oldest, newest).
OMOIDE_DUPLICATES__DUPLICATE_AUTO_KEEP_RULE=highest_res

# Use automatic scene detection for videos.
OMOIDE_VIDEO__AUTO_SCENE_DETECTION=true
# Fallback max frames per video when scene detection fails.
OMOIDE_VIDEO__MAX_FRAMES_PER_VIDEO=30

# Enable EXIF extraction.
OMOIDE_PROCESSORS__EXIF_PROCESSOR_ACTIVE=true
# Enable face extraction (requires ENABLE_PEOPLE=true).
OMOIDE_PROCESSORS__FACE_PROCESSOR_ACTIVE=true
# Enable image embedding generation.
OMOIDE_PROCESSORS__IMAGE_EMBEDDING_PROCESSOR_ACTIVE=true
# Media rows processed per heavy pipeline batch.
OMOIDE_PROCESSORS__MEDIA_BATCH_SIZE=125
